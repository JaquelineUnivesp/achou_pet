{% if request.user.is_authenticated %}
<!-- BOTÃO DE MENU PARA MOBILE -->
<button class="btn btn-primary d-md-none mb-3" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
    <i class="fas fa-bars me-2"></i> Menu
</button>

<!-- SIDEBAR: OFFCANVAS PARA MOBILE, FIXO NO DESKTOP -->
<div class="offcanvas-md offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarLabel">
  <div class="offcanvas-header d-md-none">
    <h5 class="offcanvas-title" id="sidebarLabel">Menu</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Fechar"></button>
  </div>
  <div class="offcanvas-body">
    <h2 class="sidebar-title text-center mb-4">
        <i class="fas fa-cogs me-2"></i> Configurações
    </h2>

    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-user-circle me-2"></i> Conta
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="{% url 'search:search_pets' %}" class="nav-link">
                        <i class="fas fa-search me-2"></i> Busca
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'accounts:profile' %}" class="nav-link">
                        <i class="fas fa-user me-2"></i> Perfil
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'pet_registration:user_pets_list' %}" class="nav-link">
                        <i class="fas fa-paw me-2"></i> Seus Pets
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'accounts:edit_profile' %}" class="nav-link">
                        <i class="fas fa-cogs me-2"></i> Gerenciar Conta
                    </a>
                </li>
            </ul>
        </li>

        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-pen me-2"></i> Cadastros
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="{% url 'pet_registration:register_lost_pet' %}" class="nav-link">
                        <i class="fas fa-search me-2"></i> Pet Perdido
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'pet_registration:register_adoption_pet' %}" class="nav-link">
                        <i class="fas fa-heart me-2"></i> Pet para Adoção
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'pet_registration:register_breeding_pet' %}" class="nav-link">
                        <i class="fas fa-paw me-2"></i> Pet para Reprodução
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'search:search_pets' %}" class="nav-link">
                        <i class="fas fa-search me-2"></i> Busca
                    </a>
                </li>
            </ul>
        </li>

        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-shield-alt me-2"></i> Segurança
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="{% url 'accounts:change_email' %}" class="nav-link">
                        <i class="fas fa-envelope me-2"></i> Trocar E-mail
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'accounts:password_reset' %}" class="nav-link">
                        <i class="fas fa-key me-2"></i> Redefinir Senha
                    </a>
                </li>
            </ul>
        </li>

        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-paint-brush me-2"></i> Aparência
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-eye me-2"></i> Visibilidade do Perfil
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">
                        <i class="fas fa-palette me-2"></i> Ajustar Visual
                    </a>
                </li>
            </ul>
        </li>

        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-bell me-2"></i> Notificações
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="{% url 'notifications:notifications' %}" class="nav-link">
                        <i class="fas fa-bell me-2"></i> Notificações
                    </a>
                </li>
            </ul>
        </li>

        <li class="nav-group">
            <h4 class="nav-group-title">
                <i class="fas fa-sign-in-alt me-2"></i> Autenticação
            </h4>
            <ul>
                <li class="nav-item">
                    <a href="{% url 'accounts:login' %}" class="nav-link">
                        <i class="fas fa-sign-in-alt me-2"></i> Login
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'accounts:logout' %}" class="nav-link">
                        <i class="fas fa-sign-out-alt me-2"></i> Logout
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'accounts:register' %}" class="nav-link">
                        <i class="fas fa-user-plus me-2"></i> Criar Conta
                    </a>
                </li>
            </ul>
        </li>
    </ul>
  </div>
</div>

<!-- MODAL -->
<div class="modal fade" id="dynamicModal" tabindex="-1" aria-labelledby="dynamicModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="dynamicModalLabel">Carregando...</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
      </div>
      <div class="modal-body">
        <div id="modalContent">Carregando conteúdo...</div>
      </div>
    </div>
  </div>
</div>
{% endif %}
